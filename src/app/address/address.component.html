
<div class="bg-container">
  <img src="https://www.zilliondesigns.com/blog/wp-content/uploads/Ecommerce-Logo-17.jpg" alt="AVENIDA" 
  class="proma-img" routerLink="/home"/> 
  
  <mat-stepper [linear]="isLinear" #stepper  style="width: 45%; height: 10vh; margin-bottom: 3rem;" >
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>BAG ITEM</ng-template>
         
        <div *ngFor="let item of cartItems">

        <div class="basket">
          <div class="basket-product">
            <div class="item">
              <div class="product-image" >
            <img [src]="item.product.image1" alt="Image" class="product-frame">
              </div>
              <div class="product-details" >
                <h4><strong> {{item.product.brandName}} </strong> </h4>
              <p> {{item.product.name}}</p>
              <div class="d-flex flex-row justify-content-start">
                <p > Size : <span style="font-weight: 500; margin-right: 20px;"> {{item.size}} </span> </p>
                <p > Qty : <span style="font-weight: 500;"> {{item.quantity}} </span></p>
              </div>
              <p style="font-weight: 500;">{{item.product.offerprice |currency:'INR'}} 
              <span style="text-decoration: line-through;" class="text-muted">
                {{item.product.price|currency:'INR'}}
              </span>
             </p>
              <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
                <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
              </svg>
                 <span style="font-weight: 500;"> 14 Days </span> <span style="font-size: smaller;">return available</span> </p>
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="green" class="bi bi-check2" viewBox="0 0 16 16">
                    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                  </svg> Delivery by <span style="font-weight:500;color: rgb(9, 8, 8);" > 25 Oct 2023 </span> 
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
         
            <div class="summary" style="margin-left: 26rem;">
              <div class=" d-flex flex-row" style="margin-right: 10px;" *ngFor="let item of cartItems">
                <img [src]="item.product.image1" alt="img" style="width:45px; height: 35px;margin-top: .5rem;" />
                <p class="text-muted p-2"> Estimated Delivery by  <span style="font-weight:500;color: rgb(9, 8, 8);" > 25 Oct 2023 </span>  </p> 
              </div>
            <div class="summary-total-items"><span class="total-items" style="font-weight: 500;"> PRICE DETAILS({{cartItems.length}})</span>  </div>
            <div class="summary-subtotal"> 
              <div class="subtotal-title">TOTAL MRP</div>
              <div class="subtotal-value final-value">
                {{calculateTotalByprice()|currency:"INR"}} </div>
            </div>
            <div class="summary-subtotal">
              <div class="subtotal-title">DISCOUNT MRP</div>
              <div class="subtotal-value final-value"> {{ calculateTotalByOfferprice()|currency:"INR"}} </div>
            </div>

            <div class="summary-subtotal">
              <div class="subtotal-title">Delivery Fee</div>
              <div class="subtotal-value final-value"> 
               {{30|currency:"INR"}}</div>
            </div>
            
            <div class="summary-total">
             <div class="card mt-2" ></div>
              <div class="subtotal-title" style="font-weight: 500;">Total Amount </div>
              <div class="total-value final-value" style="font-weight: 500;"> 
              {{calculateTotal()|currency:"INR"}} </div>
            </div>
            <button  matStepperNext mat-raised-button  color="primary" class="w-100 mt-4">CONTINUE</button>
          </div>
      </form>
    
    </mat-step>
    <mat-step [stepControl]="secondFormGroup" label="ADDRESS" style="height: 10vh;">
      <form [formGroup]="secondFormGroup" >
        <div class="d-flex flex-column">

          <div *ngIf="false">
          <div class="form-container" *ngIf="user" >
        <mat-form-field class="mt-2" appearance="outline"  style="margin-right: 10px;">
          <mat-label>Name</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Enter Your Name*" 
                 required>
        </mat-form-field>
        <mat-form-field appearance="outline" class="mt-2">
          <mat-label>Email</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Enter your Email*" type="email" 
                 required>
        </mat-form-field>
        </div>

        <mat-form-field appearance="outline" style="margin-left: 6.5rem;width: 68%;">
          <mat-label for="phone">Phone</mat-label>
          <input matInput formControlName="secondCtrl" [(ngModel)]="phone"  id="phone" name="phone"
           placeholder="Enter tour Phone number"  type="number" class="pincode"
             required>
        </mat-form-field>
        <mat-form-field appearance="outline"  style="margin-left: 6.5rem;width: 68%;">
          <mat-label for="address" > Address</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Enter your Address (Building No , Street , Area)"
          [(ngModel)]="address" value="address" name="address" id="address"
                 required>
        </mat-form-field>
        <mat-form-field appearance="outline"  style="margin-left: 6.5rem;width: 68%;">
          <mat-label for="locality">Locality/Town</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Enter your Locality/Town" 
          [(ngModel)]="locality" value="locality" name="locality" id="locality"
                 required>
        </mat-form-field>
        <mat-form-field appearance="outline" style="margin-left: 6.5rem;width: 68%;">
          <mat-label for="state">State</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Enter your State"
          [(ngModel)]="state" value="state" name="state" id="state"
                 required>
        </mat-form-field>

        <div class="form-container">
        <mat-form-field appearance="outline" style="margin-right: 5px;">
          <mat-label for="city">City</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Enter your City"
          [(ngModel)]="city" value="city" name="city" id="state"
                 required>
        </mat-form-field>
        <mat-form-field appearance="outline" style="margin-left: 5px;">
          <mat-label for="pincode">Pincode</mat-label>
          <input matInput formControlName="secondCtrl" placeholder="Enter Pincode" class="pincode" type="number"
          [(ngModel)]="pincode" value="pincode" id="pincode" name="pincode"
                 required>
        </mat-form-field>
        </div>
        </div>

        <div class="btm-container" *ngIf="false" >
          <p style="margin: 5px; font-weight: 500; " class="text-left"> SAVE ADDRESS AS </p>
          <div class="d-flex flex-row justify-content-start">
            <mat-chip-listbox aria-label="Fish selection" [(ngModel)]="savedAddress" name="savedAddress" >
                <mat-chip-option value="savedAddress" >HOME</mat-chip-option>
                <mat-chip-option value="savedAddress" >WORK</mat-chip-option>
              </mat-chip-listbox>
          </div>
          <button mat-raised-button color="accent"  class="mt-3 add-btn" (click)="addAddress(user)">ADD ADDRESS</button>
        </div>

          <div *ngIf="true" >

             <div class="mt-2">
              <div class="top-container mb-2">
                <h3 class="mt-2" style="font-family:'roboto';font-weight: 500;font-size: 20px;"> Select Delivery Address </h3>
                <button mat-raised-button class="address-btn" > ADD NEW ADDRESS </button>
              </div>
              <p class="text-muted" style="font-size: smaller;font-weight: 500;font-family: 'roboto';" >DEFAULT ADDRESS</p>

              <div class="card mb-3">
                <div class="card-body">
                  <div class="d-flex flex-row justify-content-start">
                      <mat-radio-button selected>Naveen</mat-radio-button>
                      <div style="background: rgb(86, 179, 86) ;width: 56px;height: 18px;border: rgb(86, 179, 86);border-radius: 20px;margin-top: .8rem;margin-left: .4rem;">
                        <span  style="color: rgb(86, 179, 86);font-size: 10px;color: white;border-color: black;margin-left: 11px;">
                          HOME</span>
                      </div>  
                    </div>
                  
                  <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                  <h5>Mobile : <span class="text-dark" >999898978</span> </h5>
                  <p class="card-text">
                    <li>
                      Pay on Delivery available
                    </li>
                  </p>
                  <button mat-raised-button >REMOVE</button>
                  <button mat-raised-button style="margin-left: .5rem;" (click)="openEditAddressDialog()" >EDIT</button>
                </div>
              </div>
              
               
             </div>
          </div>

        <div>
          <button mat-raised-button color="warn" matStepperPrevious>Back</button>
          <button mat-raised-button color="primary" style="margin-left: .5rem;" matStepperNext>Next</button>
        </div>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>PAYMENT</ng-template>
      <p>You are now done.</p>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="stepper.reset()">Reset</button>
      </div>
    </mat-step>
  </mat-stepper>
  
 
   <div class="secure-container">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="40" fill="blue" class="bi bi-shield-fill-check" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 0c-.69 0-1.843.265-2.928.56-1.11.3-2.229.655-2.887.87a1.54 1.54 0 0 0-1.044 1.262c-.596 4.477.787 7.795 2.465 9.99a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.24.829.24s.548-.108.829-.24a7.159 7.159 0 0 0 1.048-.625 11.775 11.775 0 0 0 2.517-2.453c1.678-2.195 3.061-5.513 2.465-9.99a1.541 1.541 0 0 0-1.044-1.263 62.467 62.467 0 0 0-2.887-.87C9.843.266 8.69 0 8 0zm2.146 5.146a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647z"/>
          </svg>
         <span style="color: rgb(28, 59, 237);font-size: 15px; font-family:'Courier New', Courier, monospace; font-weight: 600;"> 100% SECURE</span> 
        </div>
       
</div>



  